MongoDB Scheme Design
=====================

数据库设计是应用开发的基础，以前开发不规范，没有意识到这些东西，其实不仅仅要设计好，
还好弄出来一些UML图来表示逻辑实体间的关系，方便理解清楚脉络。

分馆信息表 分馆ID，分馆名称，分馆地址     
用户信息表 用户ID，用户昵称，用户密码    
用户相册表 用户ID，相册名称，创建时间，权限设置       
分馆相册表 分馆ID，相册名称，创建时间，权限设置
用户关注表，双向绑定 

图片列表  图片ID，用户ID，图片地址，缩略图地址，创建时间，权限设置，状态，创建时间   
图片评论表，图片ID，相册ID，相册类型 user group 
点赞数据嵌入相册，收藏数据单独一张表
图片收藏列表，图片ID、用户ID、收藏时间
图片评论、点赞 


用户表，自己的收藏其他人相册、收藏的分馆相册、点赞的图片、用户自己的图片 保持1000的数量。
用户关注表，双向绑定。
用户评论表，用户的评论，单独一个文档。

分馆表，管理员，馆长，馆员，临时访问用户，
用户相册表，额外的字段是相片列表、收藏的用户、用户的评论，置顶评论。

分馆相册表，相片列表、收藏的用户、评论、置顶评论。

图片表，存放图片上传信息。
并且图片document有额外的几个字段，点赞embed ed document array、评论、加入相册。

用户通知表，留言回复、系统通知、点赞收藏关注。

点赞只存在图片文档里。
用户收藏单独一个表，图片文档只记录数目。

主要的关系实体
-----------

要捋清楚，后面才好开发，整个应用架构才会清晰。  

- 用户，云相册的使用对象，可以注册、登陆，新建相册、上传图片、发布Post，留言评论，收藏相册，关注用户，加入分馆  



创建数据库及用户
--------------


添加数据库 wavelib_photo，创建角色如下：

```js
use wavelib_photo;
db.createUser(
  {
    user: "wavelib_photo",
    pwd: "wavelib_photo",
    roles: [
      { role: "readWrite", db: "wavelib_photo" }
    ]
  }
);
```

使用 Mongo 进行连接：
```sh
$ mongo --port 27017 -u wavelib_photo --authenticationDatabase 'wavelib_photo'
```
